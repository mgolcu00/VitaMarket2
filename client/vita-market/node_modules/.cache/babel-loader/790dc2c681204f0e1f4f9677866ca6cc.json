{"ast":null,"code":"var _jsxFileName = \"/Users/mert/Desktop/vt_odev/client/vita-market/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport './App.css';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport Dashboard from './components/Dashboard/Dashboard';\nimport Market from './components/Market/Market';\nimport Login from './components/Login/Login';\nimport { AppContext } from './context/ContextLib';\nimport Dealer from './components/Login/Dealer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction addProductToBasket(product_id, basket_id) {\n  return fetch('http://localhost:3000/basket/add', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      basket_id: basket_id,\n      product_id: product_id\n    })\n  }).then(response => response.json());\n}\n\nfunction getUserBasket(user_id) {\n  return fetch(`http://localhost:3000/basket/products/${user_id}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }).then(response => response.json());\n}\n\nfunction createBasket(user_id) {\n  return fetch('http://localhost:3000/basket/create', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      user_id: user_id\n    })\n  }).then(response => response.json());\n}\n\nfunction getBasket(basket_id) {\n  return fetch(`http://localhost:3000/basket/${basket_id}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }).then(response => response.json());\n}\n\nfunction App() {\n  _s();\n\n  const [token, setToken] = useState(localStorage.getItem('token'));\n  const [basketId, setBasketId] = useState(localStorage.getItem('basketId'));\n  const [basket, setBasket] = useState([]);\n  const [products, setProducts] = useState([]);\n\n  const fetchBasket = () => {\n    if (basketId) {\n      getBasket(basketId).then(basket => {\n        getUserBasket(basket.id).then(products => {\n          console.log('test : ');\n          setBasket(basket);\n          setProducts(products);\n        });\n      });\n    }\n  };\n\n  const addBasket = product_id => {\n    if (basketId) {\n      addProductToBasket(product_id, basketId).then(response => {\n        setProducts(response);\n      });\n    } else {\n      createNewBasket();\n    }\n  };\n\n  const createNewBasket = () => {\n    if (token) {\n      createBasket(token).then(basket => {\n        setBasketId(basket.id);\n        setBasket(basket);\n        localStorage.setItem('basketId', basket.id);\n      }).catch(error => {\n        console.log(error);\n      });\n    } else {\n      alert('no token');\n    }\n  };\n\n  const DrawProducts = () => {\n    if (products) {\n      console.log(products);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"products\",\n        children: products.map((product, index) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-image\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: product.image,\n                alt: \"product image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-name\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: product.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-price\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"product-price-label\",\n                children: \"Price:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"product-price-value\",\n                children: product.price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-quantity\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"product-quantity-label\",\n                children: \"Quantity:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"product-quantity-value\",\n                children: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this);\n    } else {\n      fetchBasket();\n    }\n  }; // fetchBasket()\n\n\n  return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n    children: /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/dealer\",\n        children: token ? /*#__PURE__*/_jsxDEV(Dashboard, {\n          token: token\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 20\n        }, this) : /*#__PURE__*/_jsxDEV(Dealer, {\n          setToken: setToken\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 50\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        children: token ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(DrawProducts, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Market, {\n            addBasket: addBasket\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Login, {\n          setToken: setToken\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 5\n  }, this);\n} //   return (\n//     <AppContext.Provider value={{ token, setToken, userType, setUserType }}>\n//       <BrowserRouter>\n//         <Switch>\n//           {token ?\n//             <Route path=\"/dealer\" >\n//               <Dashboard token={token} />\n//             </Route>\n//             :\n//             <Route path=\"/dealer\" component={Dealer} />\n//           }\n//           <Route path=\"/market\" component={Market} />\n//           <Route path=\"/login\" component={Login} />\n//         </Switch>\n//       </BrowserRouter>\n//     </AppContext.Provider>\n//   );\n// }\n\n\n_s(App, \"jFuMLxfeJWIdK522ExC58t2yO9U=\");\n\n_c = App;\nexport default App; //   if (!token) {\n//     return (\n//       <BrowserRouter>\n//         <Switch>\n//           <Route path=\"/login\"  >\n//             <Login setToken={setToken} setUserType={setUserType} />\n//           </Route>\n//           <Route path=\"/dealer\">\n//             <Delaer setToken={setToken} setUserType={setUserType} />\n//           </Route>\n//         </Switch>\n//       </BrowserRouter>)\n//   }\n//   if (userType === 'Dealer') {\n//     return (\n//       <AppContext.Provider value={{ token, setToken }}>\n//         <div className=\"wrapper\">\n//           <BrowserRouter>\n//             <Switch>\n//               <Route path=\"/dealer\" >\n//                 <Dashboard token={token} />\n//               </Route>\n//             </Switch>\n//           </BrowserRouter>\n//         </div>\n//       </AppContext.Provider>\n//     );\n//   }\n//   console.log(token);\n//   return (<BrowserRouter>\n//     <Switch>\n//       <Route path=\"/login/market\">\n//         <Market />\n//       </Route>\n//     </Switch>\n//   </BrowserRouter>)\n// }\n// if (userType === 'Dealer') {\n//   if (token) {\n//     return (\n//       <Route path=\"/dashboard\" >\n//         <Dashboard token={token} />\n//       </Route>\n//     );\n//   }\n//   return (\n//     <Route path=\"/dealer\" >\n//       <Dealer setToken={setToken} setUserType={setUserType} />\n//     </Route>\n//   );\n// }\n// else if (token) {\n//   return (\n//     <Route path=\"/market\" >\n//       <Market />\n//     </Route>\n//   );\n// }\n// else {\n//   return (\n//     <Route path=\"/login\" >\n//       <Login />\n//     </Route>\n//   );\n// }\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/mert/Desktop/vt_odev/client/vita-market/src/App.js"],"names":["React","useState","BrowserRouter","Route","Switch","Dashboard","Market","Login","AppContext","Dealer","addProductToBasket","product_id","basket_id","fetch","method","headers","body","JSON","stringify","then","response","json","getUserBasket","user_id","createBasket","getBasket","App","token","setToken","localStorage","getItem","basketId","setBasketId","basket","setBasket","products","setProducts","fetchBasket","id","console","log","addBasket","createNewBasket","setItem","catch","error","alert","DrawProducts","map","product","index","image","name","description","price"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport './App.css';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport Dashboard from './components/Dashboard/Dashboard';\nimport Market from './components/Market/Market';\nimport Login from './components/Login/Login';\nimport { AppContext } from './context/ContextLib'\nimport Dealer from './components/Login/Dealer';\n\nfunction addProductToBasket(product_id, basket_id) {\n  return fetch('http://localhost:3000/basket/add',\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        basket_id: basket_id,\n        product_id: product_id\n      })\n    })\n    .then(response => response.json())\n}\n\nfunction getUserBasket(user_id) {\n  return fetch(`http://localhost:3000/basket/products/${user_id}`,\n    {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(response => response.json())\n}\n\nfunction createBasket(user_id) {\n  return fetch('http://localhost:3000/basket/create',\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        user_id: user_id\n      })\n    })\n    .then(response => response.json())\n}\n\nfunction getBasket(basket_id) {\n  return fetch(`http://localhost:3000/basket/${basket_id}`,\n    {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(response => response.json())\n}\n\nfunction App() {\n\n\n  const [token, setToken] = useState(localStorage.getItem('token'));\n  const [basketId, setBasketId] = useState(localStorage.getItem('basketId'));\n  const [basket, setBasket] = useState([]);\n  const [products, setProducts] = useState([]);\n\n\n  const fetchBasket = () => {\n    if (basketId) {\n      getBasket(basketId)\n        .then(basket => {\n          getUserBasket(basket.id)\n            .then(products => {\n              console.log('test : ');\n              setBasket(basket);\n              setProducts(products);\n            }\n            );\n        });\n    }\n  }\n\n\n  const addBasket = (product_id) => {\n    if (basketId) {\n      addProductToBasket(product_id, basketId)\n        .then(response => {\n          setProducts(response);\n        })\n    } else {\n      createNewBasket()\n    }\n  }\n\n  const createNewBasket = () => {\n    if (token) {\n      createBasket(token)\n        .then(basket => {\n          setBasketId(basket.id);\n          setBasket(basket);\n          localStorage.setItem('basketId', basket.id);\n        }\n        ).catch(error => {\n          console.log(error);\n        });\n    } else {\n      alert('no token');\n    }\n  }\n\n\n  const DrawProducts = () => {\n    if (products) {\n      console.log(products);\n      return (\n        <div className=\"products\">\n          {\n            products.map((product, index) => {\n              return (\n                <div className=\"product\" key={index}>\n                  <div className=\"product-image\">\n                    <img src={product.image} alt=\"product image\" />\n                  </div>\n                  <div className=\"product-name\">\n                    <h3>{product.name}</h3>\n                    <p>{product.description}</p>\n                  </div>\n                  <div className=\"product-price\">\n                    <span className=\"product-price-label\">Price:</span>\n                    <span className=\"product-price-value\">{product.price}</span>\n                  </div>\n                  <div className=\"product-quantity\">\n                    <span className=\"product-quantity-label\">Quantity:</span>\n                    <span className=\"product-quantity-value\">1</span>\n                  </div>\n\n                </div>\n              );\n            })\n          }\n        </div>\n      );\n    } else {\n      fetchBasket();\n    }\n\n  }\n\n  // fetchBasket()\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route path=\"/dealer\" >\n          {token ? <Dashboard token={token} /> : <Dealer setToken={setToken} />}\n        </Route>\n        <Route path=\"/\" >\n          {token ?\n            <div>\n\n              <DrawProducts />\n              <br />\n              <Market addBasket={addBasket} />\n            </div>\n            : <Login setToken={setToken} />}\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n\n}\n\n\n\n//   return (\n//     <AppContext.Provider value={{ token, setToken, userType, setUserType }}>\n//       <BrowserRouter>\n//         <Switch>\n//           {token ?\n//             <Route path=\"/dealer\" >\n//               <Dashboard token={token} />\n//             </Route>\n//             :\n//             <Route path=\"/dealer\" component={Dealer} />\n//           }\n//           <Route path=\"/market\" component={Market} />\n//           <Route path=\"/login\" component={Login} />\n//         </Switch>\n//       </BrowserRouter>\n//     </AppContext.Provider>\n//   );\n// }\n\nexport default App;\n\n\n//   if (!token) {\n//     return (\n\n\n//       <BrowserRouter>\n//         <Switch>\n//           <Route path=\"/login\"  >\n//             <Login setToken={setToken} setUserType={setUserType} />\n//           </Route>\n//           <Route path=\"/dealer\">\n//             <Delaer setToken={setToken} setUserType={setUserType} />\n//           </Route>\n//         </Switch>\n//       </BrowserRouter>)\n//   }\n\n//   if (userType === 'Dealer') {\n//     return (\n//       <AppContext.Provider value={{ token, setToken }}>\n//         <div className=\"wrapper\">\n//           <BrowserRouter>\n//             <Switch>\n//               <Route path=\"/dealer\" >\n//                 <Dashboard token={token} />\n//               </Route>\n//             </Switch>\n//           </BrowserRouter>\n//         </div>\n//       </AppContext.Provider>\n//     );\n//   }\n\n//   console.log(token);\n//   return (<BrowserRouter>\n//     <Switch>\n//       <Route path=\"/login/market\">\n//         <Market />\n//       </Route>\n\n//     </Switch>\n//   </BrowserRouter>)\n// }\n\n\n\n\n  // if (userType === 'Dealer') {\n  //   if (token) {\n  //     return (\n  //       <Route path=\"/dashboard\" >\n  //         <Dashboard token={token} />\n  //       </Route>\n  //     );\n  //   }\n  //   return (\n  //     <Route path=\"/dealer\" >\n  //       <Dealer setToken={setToken} setUserType={setUserType} />\n  //     </Route>\n  //   );\n  // }\n  // else if (token) {\n  //   return (\n  //     <Route path=\"/market\" >\n  //       <Market />\n  //     </Route>\n  //   );\n  // }\n  // else {\n  //   return (\n  //     <Route path=\"/login\" >\n  //       <Login />\n  //     </Route>\n  //   );\n  // }\n"]},"metadata":{},"sourceType":"module"}