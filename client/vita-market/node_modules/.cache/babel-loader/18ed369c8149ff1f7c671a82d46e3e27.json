{"ast":null,"code":"var _jsxFileName = \"/Users/mert/Desktop/vt_odev/client/vita-market/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport './App.css';\nimport { BrowserRouter, Route, Switch, Link } from 'react-router-dom';\nimport Dashboard from './components/Dashboard/Dashboard';\nimport Market from './components/Market/Market';\nimport Basket from './components/Basket/Basket';\nimport Login from './components/Login/Login';\nimport Search from './components/Search/Search';\nimport { AppContext } from './context/ContextLib';\nimport Dealer from './components/Login/Dealer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction addProductToBasket(product_id, basket_id) {\n  return fetch('http://localhost:3000/basket/add', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      basket_id: basket_id,\n      product_id: product_id\n    })\n  }).then(response => response.json());\n}\n\nfunction getUserBasket(user_id) {\n  return fetch(`http://localhost:3000/basket/products/${user_id}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }).then(response => response.json());\n}\n\nfunction createBasket(user_id) {\n  return fetch('http://localhost:3000/basket/create', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      user_id: user_id\n    })\n  }).then(response => response.json());\n}\n\nfunction getBasket(basket_id) {\n  return fetch(`http://localhost:3000/basket/${basket_id}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }).then(response => response.json());\n}\n\nfunction App() {\n  _s();\n\n  const [token, setToken] = useState(localStorage.getItem('token'));\n  const [basketId, setBasketId] = useState(localStorage.getItem('basketId'));\n  const [basket, setBasket] = useState([]);\n  const [products, setProducts] = useState([]);\n  useEffect(() => {\n    fetchBasket();\n  }, []);\n\n  const fetchBasket = () => {\n    if (basketId) {\n      getBasket(basketId).then(basket => {\n        setBasketId(basket.id);\n        localStorage.setItem('basketId', basket.id);\n        getUserBasket(basket.id).then(products => {\n          console.log('test : ' + products);\n          setBasket(basket);\n          setProducts(products);\n        }).catch(err => {\n          console.log(err);\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n\n  const addBasket = product_id => {\n    if (basketId) {\n      addProductToBasket(product_id, basketId).then(response => {\n        setProducts(response);\n      });\n    } else {\n      createNewBasket();\n    }\n  };\n\n  const createNewBasket = () => {\n    if (token) {\n      createBasket(token).then(basket => {\n        setBasketId(basket.id);\n        setBasket(basket);\n        localStorage.setItem('basketId', basket.id);\n      }).catch(error => {\n        console.log(error);\n      });\n    } else {\n      alert('no token');\n    }\n  };\n\n  const DrawProducts = () => {\n    if (products) {\n      console.log(products);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"products\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Sepet : \", products.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/basket\",\n          children: \"Sepet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this);\n    }\n  }; // fetchBasket()\n\n\n  return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n    children: /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/dealer\",\n        children: token ? /*#__PURE__*/_jsxDEV(Dashboard, {\n          token: token\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 20\n        }, this) : /*#__PURE__*/_jsxDEV(Dealer, {\n          setToken: setToken\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 50\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/market\",\n        children: token ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(DrawProducts, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/search\",\n            children: /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Ara\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 34\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Market, {\n            addBasket: addBasket\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Login, {\n          setToken: setToken\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/basket\",\n        children: /*#__PURE__*/_jsxDEV(Basket, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/search\",\n        children: /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"drZXdh3ea4gEdATr8OsupYOKpak=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/mert/Desktop/vt_odev/client/vita-market/src/App.js"],"names":["React","useEffect","useState","BrowserRouter","Route","Switch","Link","Dashboard","Market","Basket","Login","Search","AppContext","Dealer","addProductToBasket","product_id","basket_id","fetch","method","headers","body","JSON","stringify","then","response","json","getUserBasket","user_id","createBasket","getBasket","App","token","setToken","localStorage","getItem","basketId","setBasketId","basket","setBasket","products","setProducts","fetchBasket","id","setItem","console","log","catch","err","addBasket","createNewBasket","error","alert","DrawProducts","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport { BrowserRouter, Route, Switch, Link } from 'react-router-dom';\nimport Dashboard from './components/Dashboard/Dashboard';\nimport Market from './components/Market/Market';\nimport Basket from './components/Basket/Basket';\nimport Login from './components/Login/Login';\nimport Search from './components/Search/Search';\nimport { AppContext } from './context/ContextLib'\nimport Dealer from './components/Login/Dealer';\n\n\nfunction addProductToBasket(product_id, basket_id) {\n  return fetch('http://localhost:3000/basket/add',\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        basket_id: basket_id,\n        product_id: product_id\n      })\n    })\n    .then(response => response.json())\n}\n\nfunction getUserBasket(user_id) {\n  return fetch(`http://localhost:3000/basket/products/${user_id}`,\n    {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(response => response.json())\n}\n\nfunction createBasket(user_id) {\n  return fetch('http://localhost:3000/basket/create',\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        user_id: user_id\n      })\n    })\n    .then(response => response.json())\n}\n\nfunction getBasket(basket_id) {\n  return fetch(`http://localhost:3000/basket/${basket_id}`,\n    {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(response => response.json())\n}\n\nfunction App() {\n\n\n  const [token, setToken] = useState(localStorage.getItem('token'));\n  const [basketId, setBasketId] = useState(localStorage.getItem('basketId'));\n  const [basket, setBasket] = useState([]);\n  const [products, setProducts] = useState([]);\n\n  useEffect(() => {\n    fetchBasket()\n  }, []);\n  const fetchBasket = () => {\n    if (basketId) {\n      getBasket(basketId)\n        .then(basket => {\n          setBasketId(basket.id);\n          localStorage.setItem('basketId', basket.id);\n          getUserBasket(basket.id)\n            .then(products => {\n              console.log('test : ' + products);\n              setBasket(basket);\n              setProducts(products);\n            }\n            ).catch\n            (err => {\n              console.log(err);\n            }\n            );\n        }).catch(err => {\n          console.log(err);\n        }\n        );\n    }\n  }\n\n\n  const addBasket = (product_id) => {\n    if (basketId) {\n      addProductToBasket(product_id, basketId)\n        .then(response => {\n          setProducts(response);\n        })\n    } else {\n      createNewBasket()\n    }\n  }\n\n  const createNewBasket = () => {\n    if (token) {\n      createBasket(token)\n        .then(basket => {\n          setBasketId(basket.id);\n          setBasket(basket);\n          localStorage.setItem('basketId', basket.id);\n        }\n        ).catch(error => {\n          console.log(error);\n        });\n    } else {\n      alert('no token');\n    }\n  }\n\n\n\n  const DrawProducts = () => {\n    if (products) {\n      console.log(products);\n      return (\n        <div className=\"products\">\n          <p>Sepet : {products.length}</p>\n          <Link to=\"/basket\">Sepet</Link>\n        </div>\n      );\n    }\n  }\n\n  // fetchBasket()\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route path=\"/dealer\" >\n          {token ? <Dashboard token={token} /> : <Dealer setToken={setToken} />}\n        </Route>\n        <Route path=\"/market\" >\n          {token ?\n            <div>\n\n              <DrawProducts />\n              <br />\n              <Link to=\"/search\"><h4>Ara</h4></Link>\n              <br />\n              <Market addBasket={addBasket} />\n            </div>\n            : <Login setToken={setToken} />}\n        </Route>\n        <Route path=\"/basket\"  >\n          <Basket />\n        </Route>\n        <Route path=\"/search\"  >\n          <Search />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}